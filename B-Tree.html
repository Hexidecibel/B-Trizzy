<script>
    class BinarySearchTree {
        constructor() 
        { 
            this.root = null; 
        } 

        insert(data) {
            var newNode = new Node();
            newNode.data = data;
            if (this.root === null) {
                this.root = newNode;
            } else {
                this.insertNode(this.root, newNode);
            }
        }

        insertNode(node, newNode) {
            if (node.data == newNode.data) {
                return null;
            } else if (newNode.data < node.data) {
                if (node.left === null) {
                    node.left = newNode;    
                } else {
                    this.insertNode(node.left, newNode);
                }
            } else {
                if (node.right === null) {
                    node.right = newNode;
                } else {
                    this.insertNode(node.right, newNode);
                }
            }
        }

        getRootNode() {
            return this.root;
        }

        inorder(node) {
            if (node !== null) {
                this.inorder(node.left);
                console.log(node.data);
                this.inorder(node.right);
            }
        }

        inorder_it() {
            var nodes = [];
            var current = root;
            while (true) {
                while (!!current) {
                    nodes.push(current);
                    current = current.left;
                }

                if (nodes.length == 0) break;
                
                var lastCurrent = nodes.pop();
                console.log(lastCurrent.data);
                current = lastCurrent.right;
            }
        }

        search(node, data) {
            if(node === null) 
                return null; 
            if (data < node.data) {
                return this.search(node.left, data);
            } else if (data > node.data) {
                return this.search(node.right, data);
            } else {
                return node;
            }
        }
    }

    function getHeight(node) {
        if (node===null) return 0;
        return Math.max(this.getHeight(node.left), this.getHeight(node.right))+1;
    }

    class Node {
        constructor(data) {
            this.data = data;
            this.left = null;
            this.right = null;
        }
    }

    // create an object for the BinarySearchTree 
    var BST = new BinarySearchTree(); 
    
    // Inserting nodes to the BinarySearchTree 
    BST.insert(15); 
    BST.insert(25); 
    BST.insert(10); 
    BST.insert(7); 
    BST.insert(22); 
    BST.insert(22); 
    BST.insert(22); 
    BST.insert(17); 
    BST.insert(13); 
    BST.insert(5); 
    BST.insert(9); 
    BST.insert(27);

    debugger

    var root = BST.getRootNode(); 

    BST.inorder_it(root); 
    BST.inorder(root); 

    var searchedNode = BST.search(root, 1);

    console.log(getHeight(root));
    console.log(getHeight(searchedNode));
</script>